<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0,minimum=1.0,user-scalable=no">
    <!--强制页面横屏或竖屏显示 content：landscape|portrait-->
    <meta name="screen-orientation" content="landscape">
    <meta content=”telephone=no” name=”format-detection” />
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <meta http-equiv="Cache-Control" content="no-cache">
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <META HTTP-EQUIV="Expires" CONTENT="0">
    <title>头兔带你玩大转盘</title>
    <link href="https://ctkj-1256675270.file.myqcloud.com/active/logo2.png" rel="shortcut icon">
    <link rel="stylesheet" href="../../css/common.css"/>
    <style>

    </style>

    <!-- 必须引入的文件-->
   <!-- <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>-->
    <script type="application/javascript" src="https://ctkj-1256675270.file.myqcloud.com/jquery.min.js"></script>
    <script type="application/javascript" src="../../plugin/layer/layer.js"></script>
    <script src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/turntable.js"></script>
    <script type="application/javascript" src="../../js/index.js"></script>


</head>
<body>
    <div id="luckeyDrewBox" v-cloak>
        <img class="headTopimg" src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/luckydrew/headimg.png" alt=""/>
        <div id="luckyDrewZpBox">


        </div>
        <div style="height:1px;position: relative;">
            <span id="lookRuleBtn"><img src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/luckydrew/rulebtn.png" alt=""/></span>
        </div>

        <div class="luckyDrewInfo">
            <p style="width:80%;margin:0 auto;">您还有 <span id="drewNum">1</span>次免费抽奖机会</p>
            <p>一次抽奖=800个葫芦卜</p>
        </div>
        <!--中奖榜单-->
        <div id="winningListBox" class="winslistBox">
            <div class="winlisthead">
                <img src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/luckydrew/winlisthead.png" alt=""/>
            </div>
            <div class="winlistBody">
                <div class="headTop">
                    <span style="width:26%;">排名</span>
                    <span>用户</span>
                    <span>奖品</span>
                </div>
                <div id="winListCon" class="winListCon">
                    <ul>
                        <li v-for="(item,index) in items"  v-bind:class="{ two: (index+1)%2 ==0 }">
                            <span class="title" v-if="item.rank ==1"><img class="first" src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/luckydrew/first.png" alt=""/></span>
                            <span class="title" v-else>{{item.rank}}</span>
                            <span>{{item.username}}</span>
                            <span>{{item.wins}}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!--我的中奖-->
        <div id="myWinningListBox" class="winslistBox">
            <div class="winlisthead">
                <img src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/luckydrew/winlisthead2.png" alt=""/>
            </div>
            <div class="winlistBody">
                <div id="myWinListCon" class="winListCon">
                    <ul>
                        <li v-for="(item,index) in myitems"  v-bind:class="{ two: (index+1)%2 ==0 }">

                            <span>{{item.wins}}</span>
                            <span>{{item.time}}</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <!--顶部字幕-->
        <div id="subTitleBox">
            <span v-for="(item,index) in zmitems">恭喜{{item.username}}中了{{item.wins}}</span>
        </div>
    </div>
    <!--抽奖规则-->
    <div class="shadeBox" id="luckyDrewRuleBox">
        <div class="luckyDrewRuleCon">
            <img class="rulebg" src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/luckydrew/rulebg.png" alt=""/>
            <ul>
                <li>1. 每日签到可获得一次免费抽奖机会 </li>
                <li>2. 兑换一次抽奖机会，消耗800萝贝</li>
                <li>3. 抽中奖品的幸运图友，请加头图小助手微信：CTCT0002，领奖不收取任何费用 </li>
                <li>4. 活动最终解释权归头图所有</li>
            </ul>
            <div class="closeBox">
                <img class="closeBtn" src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/app_lottery/checkin/close.png" alt=""/>
            </div>
        </div>
    </div>


    <script type="application/javascript" src="https://ctkj-1256675270.cos.ap-shanghai.myqcloud.com/vue.js"></script>
    <script type="text/javascript" src="../../js/active.js"></script>
    <script>
        $(function(){
            $("#luckyDrewZpBox").load("../takeoutAward/takeoutAward.html");
            zm();
        });

        /*邀请*/
        var mylist=[   {"username":"yonghu1","wins":"奖品1","rank":1},
            {"username":"yonghu1","wins":"奖品2","rank":2},
            {"username":"yonghu1","wins":"奖品3","rank":3},
            {"username":"yonghu1","wins":"奖品4","rank":4},
            {"username":"yonghu1","wins":"奖品5","rank":5},
            {"username":"yonghu1","wins":"奖品6","rank":6},
            {"username":"yonghu1","wins":"奖品7","rank":7},
            {"username":"yonghu1","wins":"奖品8","rank":8},
            {"username":"yonghu1","wins":"奖品9","rank":9},
            {"username":"yonghu1","wins":"奖品10","rank":10}];
        var mylist2=Object.assign([], mylist);

        var luckylist = new Vue({
            el: '#luckeyDrewBox',
            data: {
              invit:"88991122",
                items:mylist,
                zmitems:mylist2,
                myitems:[
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"},
                    {"time":"2018-08-09","wins":"奖品1"}
                ]
            },
            // 在 `methods` 对象中定义方法
            methods: {

            }
        });

        /*获取中奖榜单*/
        function getLuckylist(){
            var tjdatas={"UUID":result.userid};
            //console.log(tjdatas);
            tjdatas=JSON.stringify(tjdatas);
            $.ajax({
                url : path+'',
                cache:false,//false就不会从浏览器缓存中加载请求信息了
                type:"POST",
                contentType: "application/json",
                dataType:"JSON",
                async:false,
                data: tjdatas,
                error: function(data){
                    /*  layer.msg("服务器未响应,请稍后再试!");*/
                    //console.log("获取失败：");
                    //console.log(data);
                },
                success:function(diskJson){
                    console.log("完成任务列表:");
                    console.log(diskJson);
                    if(diskJson.code =="1000"){
                        myShits.items=diskJson.scList;
                    }else{

                        /*  layer.msg("网络异常，请重试！！")*/
                    }

                }
            });
        }
        /*我的中奖记录*/
        function myLuckyHistory(){
            var tjdatas={"UUID":result.userid,"pageno":1,"pagesize":10};
            //console.log(tjdatas);
            tjdatas=JSON.stringify(tjdatas);
            $.ajax({
                url : path+'/active/product/myLuckyHistory.do',
                cache:false,//false就不会从浏览器缓存中加载请求信息了
                type:"POST",
                contentType: "application/json",
                dataType:"JSON",
                async:false,
                data: tjdatas,
                error: function(data){
                    /*  layer.msg("服务器未响应,请稍后再试!");*/
                    //console.log("获取失败：");
                    //console.log(data);
                },
                success:function(diskJson){
                    console.log("我的中奖记录:");
                    console.log(diskJson);
                    if(diskJson.code =="1000"){
                        luckylist.myitems=diskJson.scList;
                    }else{

                        /*  layer.msg("网络异常，请重试！！")*/
                    }

                }
            });
        }

    /*查看规则*/
        $("#lookRuleBtn").click(function(){
            $("#luckyDrewRuleBox").addClass("active");
        });
        $("#luckyDrewRuleBox .closeBox").click(function(){
            $("#luckyDrewRuleBox").removeClass("active");
        });

        /*字幕滚动*/
        function zm(){
            var ml=$("#subTitleBox").width();
            var zminter=setInterval(function(){
                ml=ml-2;
                $("#subTitleBox span:first-child").css("margin-left",ml+"px");
                if(ml<=-175){
                    var zm=luckylist.zmitems[0];
                    luckylist.zmitems.push(zm);
                    luckylist.zmitems.splice(0,1);
                   // clearInterval(zminter);
                    ml=-4;
                }
            },25)
        }
    </script>
</body>
</html>